# Source https://community.idera.com/database-tools/powershell/powertips/b/tips/posts/converting-securestring-to-clear-text

function Read-HostSecret {
    <#
        .SYNOPSIS
        Describe purpose of "Read-HostSecret" in 1-2 sentences.

        .DESCRIPTION
        Add a more complete description of what the function does.

        .PARAMETER Prompt
        Describe parameter -Prompt.

        .EXAMPLE
        Read-HostSecret -Prompt Value
        Describe what this call does

        .NOTES
        Place additional notes here.

        .LINK
        URLs to related sites
        The first link is opened by Get-Help -Online Read-HostSecret

        .INPUTS
        List of input types that are accepted by this function.

        .OUTPUTS
        List of output types produced by this function.
    #>

    [CmdletBinding(ConfirmImpact='Low')]
    [OutputType([System.Management.Automation.PSCredential])]
    param
    (
        [Parameter(Mandatory,HelpMessage='Please enter the prompt string for the user')]
        [string] $Prompt
    )

    begin {

    }

    process {
        $password = Read-Host -Prompt $Prompt -AsSecureString
        [PSCredential]::new('X', $Password).GetNetworkCredential().Password
    }

    end {

    }
}
